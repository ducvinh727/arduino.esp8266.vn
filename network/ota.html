

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cập nhật firmware &mdash; Tài liệu Lập trình IoT với ESP8266 Arduino 1.0</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Tìm Kiếm" href="../search.html"/>
    <link rel="top" title="Tài liệu Lập trình IoT với ESP8266 Arduino 1.0" href="../index.html"/>
        <link rel="next" title="ESP8266 Arduino Flappy bird" href="../projects/flappy-bird.html"/>
        <link rel="prev" title="CoAP" href="coap.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Lập trình IoT với ESP8266 Arduino
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Cài đặt</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Cài đặt Arduino IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../board.html">Board IoT WiFi Uno</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connection.html">Kết nối máy tính</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library.html">Cài đặt thư viện</a></li>
</ul>
<p class="caption"><span class="caption-text">Cơ bản</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basic/led.html">Bật tắt LED</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/button.html">Nút nhấn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/analog.html">Analog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/timming.html">Thời gian &amp; Delay</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/serial.html">Serial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/oled.html">OLED</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/promem.html">Sử dụng Promem</a></li>
</ul>
<p class="caption"><span class="caption-text">WiFi</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../wifi/wifi-api.html">WiFi API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wifi/station.html">WiFi Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wifi/access-point.html">WiFi Access Point</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wifi/smartconfig.html">Smartconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wifi/wps.html">WPS</a></li>
</ul>
<p class="caption"><span class="caption-text">Network/Protocol</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="http-client.html">HTTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="http-server.html">HTTP Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="mqtt.html">MQTT</a></li>
<li class="toctree-l1"><a class="reference internal" href="websocket.html">Websocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="mdns.html">mDNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="coap.html">CoAP</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cập nhật firmware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#gioi-thieu-ota">Giới thiệu OTA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bao-mat">Bảo mật</a></li>
<li class="toctree-l3"><a class="reference internal" href="#an-toan">An toàn</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Dự án</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../projects/flappy-bird.html">Game Flappy Bird</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/heart-rate.html">Đo nhịp tim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/onewire.html">Cảm biến nhiệt độ (onewire)</a></li>
</ul>
<p class="caption"><span class="caption-text">Tài liệu ESP8266</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://espressif.com/sites/default/files/documentation/esp8266-technical_reference_en.pdf">Technical Reference Manual (PDF)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://espressif.com/sites/default/files/documentation/0d-esp8266_pin_list_release_15-11-2014.xlsx">Pin List and Functions (XLSX)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://espressif.com/en/products/hardware/esp8266ex/resources">Tài nguyên chính thống</a></li>
</ul>
<p class="caption"><span class="caption-text">Đóng góp và bản quyền</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Hướng dẫn đóng góp</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Lập trình IoT với ESP8266 Arduino</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Cập nhật firmware</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/network/ota.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cap-nhat-firmware">
<h1>Cập nhật firmware<a class="headerlink" href="#cap-nhat-firmware" title="Permalink to this headline">¶</a></h1>
<div class="section" id="gioi-thieu-ota">
<h2>Giới thiệu OTA<a class="headerlink" href="#gioi-thieu-ota" title="Permalink to this headline">¶</a></h2>
<p>Cập nhật firmware OTA (Over the Air) là tiến trình tải firmware mới vào
ESP module thay vì sử dụng cổng Serial. Tính năng này thực sự rất hữu
dụng trong nhiều trường hợp giới hạn về kết nối vật lý đến ESP Module.</p>
<p>OTA có thể thực hiện với:</p>
<ul class="simple">
<li><a class="reference external" href="using-arduino-ide.md">Arduino IDE</a></li>
<li><a class="reference external" href="using-web-browser.md">Web Browser</a></li>
<li><a class="reference external" href="using-http-server.md">HTTP Server</a></li>
</ul>
<p>Sử dụng OTA với tùy chọn dùng <strong>Arduino IDE</strong> trong quá trình phát
triển, thử nghiệm, 2 tùy chọn còn lại phù hợp cho việc triển khai ứng
dụng thực tế, cung cấp tính năng cập nhật OTA thông qua web hay sử dụng
HTTP Server.</p>
<p>Trong tất cả các trường hợp, thì Firmware hỗ trợ OTA phải được nạp lần
đầu tiên qua cổng Serial, nếu mọi thứ hoạt động trơn tru, logic ứng dụng
OTA hoạt động đúng thì có thể thực hiện việc cập nhật firmware thông qua
OTA.</p>
<p>Sẽ không có đảm bảo an ninh đối với quá trình cập nhật OTA bị hack. Nó
phụ thuộc vào nhà phát triển đảm bảo việc cập nhật được phép từ nguồn
hợp pháp, đáng tin cậy. Khi cập nhật hoàn tấn, ESP8266 sẽ khởi động lại
và thực thi code mới. Nhà phát triển phải đảm bảo ứng dụng thực trên
module phải được tắt và khởi độn glaij 1 cách an toàn. Nội dung bên dưới
cung cấp bổ sung các thông tin về an ninh, và an toàn cho tiến trình cập
nhật OTA.</p>
<div class="section" id="bao-mat">
<h3>Bảo mật<a class="headerlink" href="#bao-mat" title="Permalink to this headline">¶</a></h3>
<p>Khi ESP8266 được phép thực thi OTA, có nghĩa nó được kết nối mạng không
dây và có khả năng được cập nhập Sketch mới. Cho nên khả năng ESP8266 bị
tấn công sẽ nhiều hơn và bị nạp bởi mã thực thi khác là rất cao. Để giảm
khả năng bị tấn công cần xem xét bảo vệ cập nhật của bạn với một mật
khẩu, cổng sử dụng cố định khác biệt, v.v…</p>
<p>Kiểm tra những tính năng được cung cấp bởi thư viện <a class="reference external" href="https://github.com/esp8266/Arduino/tree/master/libraries/ArduinoOTA">ArduinoOTA</a> thường
xuyên, có thể được nâng cấp khả năng bảo vệ an toàn:</p>
<div class="code cpp highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">setPort</span><span class="p">(</span><span class="n">uint16_t</span> <span class="n">port</span><span class="p">);</span>
<span class="n">void</span> <span class="n">setHostname</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">hostname</span><span class="p">);</span>
<span class="n">void</span> <span class="n">setPassword</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">password</span><span class="p">);</span>
</pre></div>
</div>
<p>Một số chức năng bảo vệ đã được xây dựng trong và không yêu cầu bất kỳ
mã hóa nào cho nhà phát triển. <a class="reference external" href="https://github.com/esp8266/Arduino/tree/master/libraries/ArduinoOTA">ArduinoOTA</a> và <code class="docutils literal"><span class="pre">espota.py</span></code> sử dụng
<a class="reference external" href="https://en.wikipedia.org/wiki/Digest_access_authentication">Digest-MD5</a> để chứng thực việc tải firmware lên. Đơn giản là đảm bảo
tính toàn vẹn của firmware bằng việc tính <a class="reference external" href="https://en.wikipedia.org/wiki/MD5">MD5</a>.</p>
<p>Hãy phân tích rủi ro cho riêng ứng dụng của bạn bạn và tùy thuộc vào ứng
dụng mà quyết định những chức năng cũng như thư viện để thực hiện. Nếu
cần thiết, có thẻ xem xét việc thực hiện các phương thức bảo vệ khỏi bị
hack, ví dụ như cập nhật OTA chỉ cho tải lên chỉ theo lịch trình cụ thể,
kích hoạt OTA chỉ được người dùng nhấn nút chuyên dụng “Cập nhật”, v.v…</p>
</div>
<div class="section" id="an-toan">
<h3>An toàn<a class="headerlink" href="#an-toan" title="Permalink to this headline">¶</a></h3>
<p>Quá trình OTA tiêu tốn nguồn tài nguyên và băng thông của ESP8266 khi
tải lên. Sau đó, ESP8266 được khởi động lại và một Sketch mới được thực
thi. Cần phải phân tích và kiểm tra để Sketch mới không ảnh hưởng tới
các chức năng hiện có của Sketch hiện tại, cũng như việc cập n</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../projects/flappy-bird.html" class="btn btn-neutral float-right" title="ESP8266 Arduino Flappy bird" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="coap.html" class="btn btn-neutral" title="CoAP" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, TuanPM.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>