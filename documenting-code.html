

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Documenting Code &mdash; Tài liệu Lập trình IoT với ESP8266 Arduino 1.0</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Tìm Kiếm" href="search.html"/>
    <link rel="top" title="Tài liệu Lập trình IoT với ESP8266 Arduino 1.0" href="index.html"/>
        <link rel="next" title="Copyrights and Licenses" href="COPYRIGHT.html"/>
        <link rel="prev" title="Espressif IoT Development Framework Style Guide" href="style-guide.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Lập trình IoT với ESP8266 Arduino
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Cài đặt</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Cài đặt Arduino IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="board.html">Board IoT WiFi Uno</a></li>
<li class="toctree-l1"><a class="reference internal" href="connection.html">Kết nối máy tính</a></li>
</ul>
<p class="caption"><span class="caption-text">Cơ bản</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="basic/led.html">Bật tắt LED</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic/button.html">Nút nhấn</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic/oled.html">OLED</a></li>
</ul>
<p class="caption"><span class="caption-text">Tài liệu ESP8266</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://espressif.com/sites/default/files/documentation/esp32_technical_reference_manual_en.pdf">Technical Reference Manual (PDF)</a></li>
<li class="toctree-l1"><a class="reference external" href="http://espressif.com/sites/default/files/documentation/esp32_chip_pin_list_en.pdf">Pin List and Functions (PDF)</a></li>
<li class="toctree-l1"><a class="reference external" href="http://espressif.com/sites/default/files/documentation/esp32_pinout_v1_0.pdf">Chip Pinout (PDF)</a></li>
<li class="toctree-l1"><a class="reference external" href="http://espressif.com/sites/default/files/documentation/eco_and_workarounds_for_bugs_in_esp32_en.pdf">Silicon Errata (PDF)</a></li>
</ul>
<p class="caption"><span class="caption-text">Đóng góp</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="style-guide.html">Style Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documenting Code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-we-need-it">Why we need it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#go-for-it">Go for it!</a></li>
<li class="toctree-l2"><a class="reference internal" href="#go-one-extra-mile">Go one extra mile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#put-it-all-together">Put it all together</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ok-but-i-am-new-to-sphinx">OK, but I am new to Sphinx!</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wrap-up">Wrap up</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Legal</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="COPYRIGHT.html">Copyrights and Licenses</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Lập trình IoT với ESP8266 Arduino</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Documenting Code</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/documenting-code.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="documenting-code">
<h1>Documenting Code<a class="headerlink" href="#documenting-code" title="Permalink to this headline">¶</a></h1>
<p>The purpose of this description is to provide quick summary on documentation style used in <a class="reference external" href="https://github.com/espressif/esp-idf/">espressif/esp-idf</a> repository and how to add new documentation.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>When documenting code for this repository, please follow <a class="reference external" href="http://www.stack.nl/~dimitri/doxygen/manual/docblocks.html#specialblock">Doxygen style</a>. You are doing it by inserting special commands, for instance <code class="docutils literal"><span class="pre">&#64;param</span></code>, into standard comments blocks, for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/**</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">ratio</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">oxygen</span> <span class="n">to</span> <span class="n">air</span> <span class="n">ratio</span>
 <span class="o">*/</span>
</pre></div>
</div>
<p>Doxygen is phrasing the code, extracting the commands together with subsequent text, and building documentation out of it.</p>
<p>Typical comment block, that contains documentation of a function, looks like below.</p>
<img alt="Sample inline code documentation" class="align-center" src="_static/doc-code-documentation-inline.png" />
<p>Doxygen supports couple of formatting styles. It also gives you great flexibility on level of details to include in documentation. To get familiar with available features, please check data reach and very well organized <a class="reference external" href="http://www.stack.nl/~dimitri/doxygen/manual/index.html">Doxygen Manual</a>.</p>
</div>
<div class="section" id="why-we-need-it">
<h2>Why we need it?<a class="headerlink" href="#why-we-need-it" title="Permalink to this headline">¶</a></h2>
<p>The ultimate goal is to ensure that all the code is consistently documented, so we can use tools like <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a> and <a class="reference external" href="https://breathe.readthedocs.io/">Breathe</a> to aid preparation and automatic updates of API documentation when the code changes.</p>
<p>With these tools the above piece of code renders like below:</p>
<img alt="Sample inline code after rendering" class="align-center" src="_static/doc-code-documentation-rendered.png" />
</div>
<div class="section" id="go-for-it">
<h2>Go for it!<a class="headerlink" href="#go-for-it" title="Permalink to this headline">¶</a></h2>
<p>When writing code for this repository, please follow guidelines below.</p>
<ol class="arabic simple">
<li>Document all building blocks of code: functions, structs, typedefs, enums, macros, etc. Provide enough information on purpose, functionality and limitations of documented items, as you would like to see them documented when reading the code by others.</li>
<li>Documentation of function should describe what this function does. If it accepts input parameters and returns some value, all of them should be explained.</li>
<li>Do not add a data type before parameter or any other characters besides spaces. All spaces and line breaks are compressed into a single space. If you like to break a line, then break it twice.</li>
</ol>
<blockquote>
<div><img alt="Sample function documented inline and after rendering" class="align-center" src="_static/doc-code-function.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li>If function has void input or does not return any value, then skip <code class="docutils literal"><span class="pre">&#64;param</span></code> or <code class="docutils literal"><span class="pre">&#64;return</span></code></li>
</ol>
<blockquote>
<div><img alt="Sample void function documented inline and after rendering" class="align-center" src="_static/doc-code-void-function.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li>When documenting a <code class="docutils literal"><span class="pre">define</span></code> as well as members of a <code class="docutils literal"><span class="pre">struct</span></code> or <code class="docutils literal"><span class="pre">enum</span></code>, place specific comment like below after each member.</li>
</ol>
<blockquote>
<div><img alt="Sample of member documentation inline and after rendering" class="align-center" src="_static/doc-code-member.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li>To provide well formatted lists, break the line after command (like <code class="docutils literal"><span class="pre">&#64;return</span></code> in example below).</li>
</ol>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">*</span>
<span class="o">*</span> <span class="nd">@return</span>
<span class="o">*</span>    <span class="o">-</span> <span class="n">ESP_OK</span> <span class="k">if</span> <span class="n">erase</span> <span class="n">operation</span> <span class="n">was</span> <span class="n">successful</span>
<span class="o">*</span>    <span class="o">-</span> <span class="n">ESP_ERR_NVS_INVALID_HANDLE</span> <span class="k">if</span> <span class="n">handle</span> <span class="n">has</span> <span class="n">been</span> <span class="n">closed</span> <span class="ow">or</span> <span class="ow">is</span> <span class="n">NULL</span>
<span class="o">*</span>    <span class="o">-</span> <span class="n">ESP_ERR_NVS_READ_ONLY</span> <span class="k">if</span> <span class="n">handle</span> <span class="n">was</span> <span class="n">opened</span> <span class="k">as</span> <span class="n">read</span> <span class="n">only</span>
<span class="o">*</span>    <span class="o">-</span> <span class="n">ESP_ERR_NVS_NOT_FOUND</span> <span class="k">if</span> <span class="n">the</span> <span class="n">requested</span> <span class="n">key</span> <span class="n">doesn</span><span class="s1">&#39;t exist</span>
<span class="o">*</span>    <span class="o">-</span> <span class="n">other</span> <span class="n">error</span> <span class="n">codes</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">underlying</span> <span class="n">storage</span> <span class="n">driver</span>
<span class="o">*</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="7">
<li>Overview of functionality of documented header file, or group of files that make a library, should be placed in the same directory in a separate <code class="docutils literal"><span class="pre">README.rst</span></code> file. If directory contains header files for different APIs, then the file name should be <code class="docutils literal"><span class="pre">apiname-readme.rst</span></code>.</li>
</ol>
</div>
<div class="section" id="go-one-extra-mile">
<h2>Go one extra mile<a class="headerlink" href="#go-one-extra-mile" title="Permalink to this headline">¶</a></h2>
<p>There is couple of tips, how you can make your documentation even better and more useful to the reader.</p>
<ol class="arabic simple">
<li>Add code snippets to illustrate implementation. To do so, enclose snippet using <code class="docutils literal"><span class="pre">&#64;code{c}</span></code> and <code class="docutils literal"><span class="pre">&#64;endcode</span></code> commands.</li>
</ol>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">*</span>
<span class="o">*</span> <span class="nd">@code</span><span class="p">{</span><span class="n">c</span><span class="p">}</span>
<span class="o">*</span> <span class="o">//</span> <span class="n">Example</span> <span class="n">of</span> <span class="n">using</span> <span class="n">nvs_get_i32</span><span class="p">:</span>
<span class="o">*</span> <span class="n">int32_t</span> <span class="n">max_buffer_size</span> <span class="o">=</span> <span class="mi">4096</span><span class="p">;</span> <span class="o">//</span> <span class="n">default</span> <span class="n">value</span>
<span class="o">*</span> <span class="n">esp_err_t</span> <span class="n">err</span> <span class="o">=</span> <span class="n">nvs_get_i32</span><span class="p">(</span><span class="n">my_handle</span><span class="p">,</span> <span class="s2">&quot;max_buffer_size&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">max_buffer_size</span><span class="p">);</span>
<span class="o">*</span> <span class="k">assert</span><span class="p">(</span><span class="n">err</span> <span class="o">==</span> <span class="n">ESP_OK</span> <span class="o">||</span> <span class="n">err</span> <span class="o">==</span> <span class="n">ESP_ERR_NVS_NOT_FOUND</span><span class="p">);</span>
<span class="o">*</span> <span class="o">//</span> <span class="k">if</span> <span class="n">ESP_ERR_NVS_NOT_FOUND</span> <span class="n">was</span> <span class="n">returned</span><span class="p">,</span> <span class="n">max_buffer_size</span> <span class="n">will</span> <span class="n">still</span>
<span class="o">*</span> <span class="o">//</span> <span class="n">have</span> <span class="n">its</span> <span class="n">default</span> <span class="n">value</span><span class="o">.</span>
<span class="o">*</span> <span class="nd">@endcode</span>
<span class="o">*</span>
</pre></div>
</div>
<p>The code snippet should be enclosed in a comment block of the function that it illustrates.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>To highlight some important information use command <code class="docutils literal"><span class="pre">&#64;attention</span></code> or <code class="docutils literal"><span class="pre">&#64;note</span></code>.</li>
</ol>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">*</span>
<span class="o">*</span> <span class="nd">@attention</span>
<span class="o">*</span>     <span class="mf">1.</span> <span class="n">This</span> <span class="n">API</span> <span class="n">only</span> <span class="n">impact</span> <span class="n">WIFI_MODE_STA</span> <span class="ow">or</span> <span class="n">WIFI_MODE_APSTA</span> <span class="n">mode</span>
<span class="o">*</span>     <span class="mf">2.</span> <span class="n">If</span> <span class="n">the</span> <span class="n">ESP32</span> <span class="ow">is</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">an</span> <span class="n">AP</span><span class="p">,</span> <span class="n">call</span> <span class="n">esp_wifi_disconnect</span> <span class="n">to</span> <span class="n">disconnect</span><span class="o">.</span>
<span class="o">*</span>
</pre></div>
</div>
<p>Above example also shows how to use a numbered list.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Use markdown to make your documentation even more readable. You will add headers, links, tables and more.</li>
</ol>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">*</span>
<span class="o">*</span> <span class="p">[</span><span class="n">ESP32</span> <span class="n">Technical</span> <span class="n">Reference</span><span class="p">](</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">espressif</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sites</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">documentation</span><span class="o">/</span><span class="n">esp32_technical_reference_manual_en</span><span class="o">.</span><span class="n">pdf</span><span class="p">)</span>
<span class="o">*</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Ghi chú</p>
<p class="last">Code snippets, notes, links, etc. will not make it to the documentation, if not enclosed in a comment block associated with one of documented objects.</p>
</div>
<ol class="arabic simple" start="5">
<li>Prepare one or more complete code examples together with description. Place them in a separate file <code class="docutils literal"><span class="pre">example.rst</span></code> in the same directory as the API header files. If directory contains header files for different APIs, then the file name should be <code class="docutils literal"><span class="pre">apiname-example.rst</span></code>.</li>
</ol>
</div>
<div class="section" id="put-it-all-together">
<h2>Put it all together<a class="headerlink" href="#put-it-all-together" title="Permalink to this headline">¶</a></h2>
<p>Once all the above steps are complete, follow instruction in <span class="xref doc">api/template</span> and create a single file, that will merge all individual pieces of prepared documentation. Finally add a link to this file to respective <code class="docutils literal"><span class="pre">..</span> <span class="pre">toctree::</span></code> in <code class="docutils literal"><span class="pre">index.rst</span></code> file located in <code class="docutils literal"><span class="pre">/docs</span></code> folder.</p>
</div>
<div class="section" id="ok-but-i-am-new-to-sphinx">
<h2>OK, but I am new to Sphinx!<a class="headerlink" href="#ok-but-i-am-new-to-sphinx" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>No worries. All the software you need is well documented. It is also open source and free. Start by checking <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a> documentation. If you are not clear how to write using rst markup language, see <a class="reference external" href="http://www.sphinx-doc.org/en/stable/rest.html">reStructuredText Primer</a>.</li>
<li>Check the source files of this documentation to understand what is behind of what you see now on the screen. Sources are maintained on GitHub in <a class="reference external" href="https://github.com/espressif/esp-idf/">espressif/esp-idf</a> repository in <a href="#id2"><span class="problematic" id="id3">:idf:`docs`</span></a> folder. You can go directly to the source file of this page by scrolling up and clicking the link in the top right corner. When on GitHub, see what&#8217;s really inside, open source files by clicking <code class="docutils literal"><span class="pre">Raw</span></code> button.</li>
<li>You will likely want to see how documentation builds and looks like before posting it on the GitHub. There are two options to do so:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Install <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a>, <a class="reference external" href="https://breathe.readthedocs.io/">Breathe</a> and <a class="reference external" href="http://www.stack.nl/~dimitri/doxygen/">Doxygen</a> to build it locally. You would need a Linux machine for that.</li>
<li>Set up an account on <a class="reference external" href="https://readthedocs.org/">Read the Docs</a> and build documentation in the cloud. Read the Docs provides document building and hosting for free and their service works really quick and great.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="wrap-up">
<h2>Wrap up<a class="headerlink" href="#wrap-up" title="Permalink to this headline">¶</a></h2>
<p>We love good code that is doing cool things.
We love it even better, if it is well documented, so we can quickly make it run and also do the cool things.</p>
<p>Go ahead, contribute your code and documentation!</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="COPYRIGHT.html" class="btn btn-neutral float-right" title="Copyrights and Licenses" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="style-guide.html" class="btn btn-neutral" title="Espressif IoT Development Framework Style Guide" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, TuanPM.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>